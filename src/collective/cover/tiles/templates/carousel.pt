<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="collective.cover">

<head>
  <link rel="stylesheet" type="text/css"
      tal:attributes="href string:${context/@@plone_portal_state/portal_url}/++resource++collective.cover/cycle2-theme/cycle2.cover_theme.css" />

</head>

<body tal:define="is_empty view/is_empty">

  <p tal:condition="python: is_empty and view.is_compose_mode()" i18n:translate="">
    This carousel is empty; open the content chooser and drag-and-drop some items here.
  </p>

  <div id="" class="cycle2-carousel cover-carousel-tile tile-content" 
       data-cycle-caption-plugin="caption2"
       data-cycle-slides="> div.slide"
       tal:condition="not:is_empty"
       tal:attributes="id string:cycle-${view/id};
                       data-cycle-paused python:str(not view.autoplay()).lower();">
    <div class="cycle-prev"></div>
    <div class="cycle-next"></div>

    <div class="cycle-pager"></div>        
    <tal:items repeat="item view/results">
      <div class="slide"
         tal:attributes="data-cycle-title item/Title;
                         data-cycle-desc item/Description;">
        <a href="#"
           tal:attributes="href item/absolute_url;">
          <img tal:define="thumbnail python:view.thumbnail(item);
                           uid python:view.get_uid(item);"
               tal:condition="python:thumbnail and uid"
               tal:attributes="src thumbnail/url|string:${item/absolute_url}/download;
                               data-uid uid;" />
        </a>
        <div class="cycle-overlay">
          <a href="#"
             tal:attributes="href item/absolute_url;">
            <div class="slide-title"
                 tal:content="item/Title">title</div>
          </a>
          <div class="slide-desc"
               tal:content="item/Description">description</div>
         </div>
       </div>
    </tal:items>
  </div>
  <script type="text/javascript">
    $( '.cycle2-carousel' ).cycle();
  </script>
</body>
</html>
